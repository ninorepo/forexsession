<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forex Sessions - Vertical Timeline (WIB)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
    }

    h2 {
      text-align: center;
    }

    .timeline {
      position: relative;
      width: 90%;
      height: 600px;
      margin: 20px auto;
      border-left: 2px solid #444;
    }

    .session {
      position: absolute;
      left: 10px;
      height: 40px;
      border-radius: 4px;
      color: white;
      padding-left: 5px;
      line-height: 40px;
      font-weight: bold;
      width: 80%;
    }

    .Sydney { background: #3f51b5; }
    .Tokyo { background: #4caf50; }
    .London { background: #ff9800; }
    .NewYork { background: #f44336; }

    .cursor {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: black;
      z-index: 2;
    }

    .time-label {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Forex Sessions Timeline (WIB)</h2>
  <div class="timeline" id="timeline">
    <div class="cursor" id="cursor"></div>
  </div>
  <div class="time-label" id="current-time-label"></div>

  <script>
    const timeline = document.getElementById('timeline');
    const cursor = document.getElementById('cursor');
    const timeLabel = document.getElementById('current-time-label');
    const timelineHeight = timeline.offsetHeight;

    const sessions = [
      { name: 'Sydney', startUTC: 21, endUTC: 6, class: 'Sydney' },
      { name: 'Tokyo', startUTC: 0, endUTC: 9, class: 'Tokyo' },
      { name: 'London', startUTC: 7, endUTC: 16, class: 'London' },
      { name: 'New York', startUTC: 12, endUTC: 21, class: 'NewYork' },
    ];

    function convertToWIB(hour) {
      return (hour + 7) % 24;
    }

    function toPixels(hour) {
      return (hour / 24) * timelineHeight;
    }

    function renderSessions() {
      sessions.forEach(session => {
        const startWIB = convertToWIB(session.startUTC);
        const endWIB = convertToWIB(session.endUTC);
        const sessionDiv = document.createElement('div');
        sessionDiv.classList.add('session', session.class);

        let top, height;

        if (startWIB < endWIB) {
          top = toPixels(startWIB);
          height = toPixels(endWIB - startWIB);
        } else {
          // Spans midnight
          top = toPixels(startWIB);
          height = toPixels(24 - startWIB) + toPixels(endWIB);
        }

        sessionDiv.style.top = top + 'px';
        sessionDiv.style.height = height + 'px';
        sessionDiv.innerText = session.name;
        timeline.appendChild(sessionDiv);
      });
    }

    function updateCursor() {
      const now = new Date();
      const wibHour = (now.getUTCHours() + 7) % 24;
      const wibMinutes = now.getUTCMinutes();
      const totalHour = wibHour + wibMinutes / 60;

      const cursorY = toPixels(totalHour);
      cursor.style.top = cursorY + 'px';

      timeLabel.innerText = `Current Time in Jakarta (WIB): ${String(wibHour).padStart(2, '0')}:${String(wibMinutes).padStart(2, '0')}`;
    }

    renderSessions();
    updateCursor();
    setInterval(updateCursor, 60 * 1000); // update every minute
  </script>
</body>
</html>
